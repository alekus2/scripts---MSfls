def calc_max_por_index(idx):
    import arcpy
    table = "Shape_IFQ12_teste"
    # obs: se Index for texto, coloque aspas simples
    where = f"\"Index\" = '{idx}'"
    max_nm = 0
    with arcpy.da.SearchCursor(table, ["NM_PARCELA"], where_clause=where) as cur:
        for (nm,) in cur:
            if nm and nm > max_nm:
                max_nm = nm
    return max_nm
